import{_ as i,z as s,o as a,D as t}from"./chunks/framework.CEZ28rDC.js";const c=JSON.parse('{"title":"Vite 模式与环境变量","description":"Vite 模式与环境变量","frontmatter":{"id":1737444286721,"date":"2025/01/22 11:02","title":"Vite 模式与环境变量","description":"Vite 模式与环境变量","tag":"Vite 前端","archive":null,"recommendations":1737429447213,"shadow":false,"top":0},"headers":[],"relativePath":"ViteModeAndEnv.md","filePath":"ViteModeAndEnv.md"}'),n={name:"ViteModeAndEnv.md"};function l(o,e,h,p,d,r){return a(),s("div",null,e[0]||(e[0]=[t(`<h1 id="vite-模式与环境变量" tabindex="-1">Vite 模式与环境变量 <a class="header-anchor" href="#vite-模式与环境变量" aria-label="Permalink to &quot;Vite 模式与环境变量&quot;">​</a></h1><p>在了解 Vite 的模式与环境变量前建议先了解 <a href="./VueCliModeAndEnv.html">Vue Cli 的 mode 模式和 env 环境变量</a>，其大部分的内容都是相同的。</p><blockquote><p>以下只讲其不同点</p></blockquote><h1 id="环境" tabindex="-1">环境 <a class="header-anchor" href="#环境" aria-label="Permalink to &quot;环境&quot;">​</a></h1><p>默认有开发模式 development 和生产模式 production，可以通过 <code>--mode</code> 来指定模式。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> staging</span></span></code></pre></div><h1 id="env-文件" tabindex="-1">env 文件 <a class="header-anchor" href="#env-文件" aria-label="Permalink to &quot;env 文件&quot;">​</a></h1><p>与 package.json 同级，名为 <code>env[.mode](.local)</code>。在文件中只有以 <code>VITE_</code> 为前缀的变量才会暴露:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VITE_SOME_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 暴露</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">foobar</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 不暴露</span></span></code></pre></div><blockquote><p>如果想使用其他属性前缀，可以在项目的 <code>vite.config.js</code> 中配置 <code>envPrefix</code> 属性。</p></blockquote><h1 id="读取-env-属性" tabindex="-1">读取 env 属性 <a class="header-anchor" href="#读取-env-属性" aria-label="Permalink to &quot;读取 env 属性&quot;">​</a></h1><p>在项目中通过访问 <code>import.meta.env</code> 的属性来获取设置的 env 属性。其中有一些是已经存在的属性：</p><ul><li><code>import.meta.env.MODE</code>: {string} 应用运行的模式。</li><li><code>import.meta.env.BASE_URL</code>: {string} 部署应用时的基本 URL。他由 base 配置项决定。</li><li><code>import.meta.env.PROD</code>: {boolean} 应用是否运行在生产环境。</li><li><code>import.meta.env.DEV</code>: {boolean} 应用是否运行在开发环境 (永远与 import.meta.env.PROD 相反)。</li><li><code>import.meta.env.SSR</code>: {boolean} 应用是否运行在 server 上。</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_SOME_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;123&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DB_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;undefined&#39;</span></span></code></pre></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p><a href="https://cn.vitejs.dev/guide/env-and-mode" target="_blank" rel="noreferrer">环境变量和模式 | Vite 官方中文文档</a></p>`,16)]))}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
